{"version":3,"sources":["Board.js","Game.js","Main.js","Settings.js","Status.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"../app.js","sourcesContent":["'use strict';\r\nclass Board{\r\n    constructor() {\r\n        this.gameTableElement=document.getElementById('game');\r\n    }\r\n\r\n    /**\r\n     * Инициализация игры.\r\n     */\r\n    init() {\r\n        // Выводим все ячейки.\r\n        this.renderMap();\r\n\r\n    };\r\n\r\n    /**\r\n     * Вывод ячеек в html.\r\n     */\r\n    renderMap() {\r\n        for (let row = 0; row < 3; row++) {\r\n            const tr = document.createElement('tr');\r\n            this.gameTableElement.appendChild(tr);\r\n            for (let col = 0; col < 3; col++) {\r\n                let td = document.createElement('td');\r\n                td.dataset.row = row.toString();\r\n                td.dataset.col = col.toString();\r\n                tr.appendChild(td);\r\n            }\r\n        }\r\n    };\r\n\r\n}","'use strict';\r\nclass Game {\r\n    init(board,settings,status){\r\n        this.board = board;\r\n        this.settings = settings;\r\n        this.status = status;\r\n\r\n        // Инициализируем обработчики событий.\r\n        this.initEventHandlers();\r\n    }\r\n    /**\r\n     * Инициализация обработчиков событий.\r\n     */\r\n    initEventHandlers() {\r\n        // Ставим обработчик, при клике на таблицу вызовется функция this.cellClickHandler.\r\n        this.board.gameTableElement.addEventListener('click', event => this.cellClickHandler(event));\r\n    }\r\n    /**\r\n     * Обработчик события клика.\r\n     * @param {MouseEvent} event\r\n     */\r\n    cellClickHandler(event) {\r\n        // Если клик не нужно обрабатывать, уходим из функции.\r\n        if (!this.isCorrectClick(event)) {\r\n            return;\r\n        }\r\n\r\n        // Заполняем ячейку.\r\n        this.fillCell(event);\r\n        // Если кто-то выиграл, заходим в if.\r\n        if (this.hasWon()) {\r\n            // Ставим статус в \"остановлено\".\r\n            this.setStatusStopped();\r\n            // Сообщаем о победе пользователя.\r\n            this.sayWonPhrase();\r\n        }\r\n\r\n        // Меняем фигуру (крестик или нолик).\r\n        this.togglePhase();\r\n    }\r\n    /**\r\n     * Проверка был ли корректный клик, что описан в событии event.\r\n     * @param {Event} event\r\n     * @returns {boolean} Вернет true в случае если статус игры \"играем\", клик что описан в объекте event был\r\n     * по ячейке и ячейка куда был произведен клик был по пустой ячейке.\r\n     */\r\n    isCorrectClick(event) {\r\n        return this.status.isStatusPlaying() && this.isClickByCell(event) && this.isCellEmpty(event);\r\n    }\r\n    /**\r\n     * Проверка что клик был по ячейке.\r\n     * @param {Event} event\r\n     * @param {HTMLElement} event.target\r\n     * @returns {boolean} Вернет true, если клик был по ячейке, иначе false.\r\n     */\r\n    isClickByCell(event) {\r\n        return event.target.tagName === 'TD';\r\n    }\r\n    /**\r\n     * Проверка что в ячейку не ставили значение (крестик или нолик).\r\n     * @param {Event} event\r\n     * @param {HTMLElement} event.target\r\n     * @returns {boolean} Вернет true, если ячейка пуста, иначе false.\r\n     */\r\n    isCellEmpty(event) {\r\n        // Получаем строку и колонку куда кликнули.\r\n        let row = +event.target.dataset.row;\r\n        let col = +event.target.dataset.col;\r\n\r\n        return this.settings.mapValues[row][col] === '';\r\n    }\r\n    /**\r\n     * Заполняет ячейку в которую кликнул пользователь в событии event.\r\n     * @param {Event} event\r\n     * @param {HTMLElement} event.target\r\n     */\r\n    fillCell(event) {\r\n        // Получаем строку и колонку куда кликнули.\r\n        let row = +event.target.dataset.row;\r\n        let col = +event.target.dataset.col;\r\n\r\n        // Заполняем ячейку и ставим значение в массиве, в свойстве mapValues.\r\n        this.settings.mapValues[row][col] = this.settings.phase;\r\n        event.target.textContent = this.settings.phase;\r\n    }\r\n    /**\r\n     * Проверка есть ли выигрышная ситуация на карте.\r\n     * @returns {boolean} Вернет true, если игра выиграна, иначе false.\r\n     */\r\n    hasWon() {\r\n\r\n        return this.isLineWon({ x: 0, y: 0 }, { x: 1, y: 0 }, { x: 2, y: 0 }) ||\r\n            this.isLineWon({ x: 0, y: 1 }, { x: 1, y: 1 }, { x: 2, y: 1 }) ||\r\n            this.isLineWon({ x: 0, y: 2 }, { x: 1, y: 2 }, { x: 2, y: 2 }) ||\r\n\r\n            this.isLineWon({ x: 0, y: 0 }, { x: 0, y: 1 }, { x: 0, y: 2 }) ||\r\n            this.isLineWon({ x: 1, y: 0 }, { x: 1, y: 1 }, { x: 1, y: 2 }) ||\r\n            this.isLineWon({ x: 2, y: 0 }, { x: 2, y: 1 }, { x: 2, y: 2 }) ||\r\n\r\n            this.isLineWon({ x: 0, y: 0 }, { x: 1, y: 1 }, { x: 2, y: 2 }) ||\r\n            this.isLineWon({ x: 0, y: 2 }, { x: 1, y: 1 }, { x: 2, y: 0 });\r\n    }\r\n    /**\r\n     * Проверка есть ли выигрышная ситуация на линии.\r\n     * @param {{x: int, y: int}} a 1-ая ячейка.\r\n     * @param {{x: int, y: int}} b 2-ая ячейка.\r\n     * @param {{x: int, y: int}} c 3-я ячейка.\r\n     * @returns {boolean} Вернет true, если линия выиграна, иначе false.\r\n     */\r\n    isLineWon(a, b, c) {\r\n        let value = this.settings.mapValues[a.y][a.x] + this.settings.mapValues[b.y][b.x] + this.settings.mapValues[c.y][c.x];\r\n        return value === 'XXX' || value === '000';\r\n    }\r\n}","'use strict';\r\nwindow.addEventListener('load', ()=>{\r\n    const settings = new Settings;\r\n    const board = new Board;\r\n    const game = new Game;\r\n    const status = new Status;\r\n\r\n    board.init();\r\n    // status.setPlaying();\r\n    game.init(board,settings,status);\r\n});\r\n\r\n","'use strict';\r\nclass Settings{\r\n    constructor() {\r\n        this.mapValues = [\r\n            ['', '', ''],\r\n            ['', '', ''],\r\n            ['', '', ''],\r\n        ];\r\n        this.phase = 'X';\r\n    }\r\n};","'use strict';\r\nclass Status {\r\n    constructor() {\r\n        this.setPlaying();\r\n    }\r\n    /** Это значит что мы играем. */\r\n    setPlaying() {\r\n        this.status = 'playing';\r\n    }\r\n    /**\r\n     * @returns {boolean} если мы сейчас играем, тогда true, иначе false.\r\n     */\r\n    isStatusPlaying() {\r\n        return this.status === 'playing';\r\n    }\r\n\r\n}"]}